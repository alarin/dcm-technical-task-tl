(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{18:function(e,t,a){e.exports=a(42)},23:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var r=a(0),s=a.n(r),n=a(15),l=a.n(n),i=(a(23),a(17)),c=a(2),o=a(3),u=a(5),m=a(4),p=function(e){return e.children},d=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e="failed";return"SUCCESS"===this.props.status?e="succeed":"RUNNING"!==this.props.status&&"CREATED"!==this.props.status||(e="running"),s.a.createElement("tr",{className:e},s.a.createElement("td",null,this.props.ID),s.a.createElement("td",null,this.props.requestedBy),s.a.createElement("td",null,this.props.createdAt),s.a.createElement("td",null,this.props.env_name),s.a.createElement("td",null,this.props.path),s.a.createElement("td",null,this.props.status),s.a.createElement("td",null,s.a.createElement("a",{href:"#",onClick:this.props.click},"View Details")))}}]),a}(r.Component),h=function(e){return e.items.map((function(t){return s.a.createElement(d,{key:t.id,ID:t.id,createdAt:t.created_at,env_name:t.env_name,requestedBy:t.requested_by,status:t.status,path:t.displayPath,click:e.clicked.bind(void 0,t.id)})}))},E=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e=s.a.createElement(h,{items:this.props.items,clicked:this.props.viewItemDetails});return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("fieldset",null,s.a.createElement("legend",null,"Test execution requests"),s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("thead",null,s.a.createElement("tr",null,s.a.createElement("th",null,"Request ID"),s.a.createElement("th",null,"Requested By"),s.a.createElement("th",null,"Created At"),s.a.createElement("th",null,"Test Env"),s.a.createElement("th",null,"Test Path"),s.a.createElement("th",null,"Status"),s.a.createElement("th",null,"Details"))),s.a.createElement("tbody",null,e))))))}}]),a}(r.Component),v=a(16),f=a.n(v).a.create({baseURL:"http://127.0.0.1:8081/api/v1/"}),b=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){var e="failed";return"SUCCESS"===this.props.currentItem.status?e="succeed":"RUNNING"!==this.props.currentItem.status&&"CREATED"!==this.props.currentItem.status||(e="running"),s.a.createElement(p,null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("a",{className:"btn btn-primary float-right",href:"#",onClick:this.props.backClicked.bind(this)},"Back"))),s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("fieldset",null,s.a.createElement("legend",null,"Test details"),s.a.createElement("div",{className:"table-responsive"},s.a.createElement("table",{className:"table table-striped"},s.a.createElement("tbody",null,s.a.createElement("tr",null,s.a.createElement("td",{className:"title"},"ID"),s.a.createElement("td",null,this.props.currentItem.id)),s.a.createElement("tr",null,s.a.createElement("td",{className:"title"},"Requested by"),s.a.createElement("td",null,this.props.currentItem.requested_by)),s.a.createElement("tr",null,s.a.createElement("td",{className:"title"},"Env"),s.a.createElement("td",null,this.props.currentItem.env_name)),s.a.createElement("tr",null,s.a.createElement("td",{className:"title"},"Path"),s.a.createElement("td",null,this.props.currentItem.displayPath)),s.a.createElement("tr",{className:e},s.a.createElement("td",{className:"title"},"Status"),s.a.createElement("td",null,this.props.currentItem.status)),s.a.createElement("tr",null,s.a.createElement("td",{className:"title"},"Logs"),s.a.createElement("td",null,s.a.createElement("pre",null,s.a.createElement("code",{className:"python"},this.props.currentItem.logs)))))))))))}}]),a}(r.Component),g=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("fieldset",null,s.a.createElement("legend",null,"New request"),s.a.createElement("form",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3 form-group"},s.a.createElement("input",{type:"text",className:"form-control",name:"requester",id:"requester",placeholder:"Requester",value:this.props.requester,onChange:this.props.requesterChanged.bind(this)}),s.a.createElement("p",{className:"error-message"},this.props.requesterError)),s.a.createElement("div",{className:"col-md-3 form-group"},s.a.createElement("select",{className:"form-control",name:"env_id",id:"env_id",placeholder:"Environment ID",value:this.props.env,onChange:this.props.envChanged.bind(this)},s.a.createElement("option",{value:"",defaultValue:!0}),this.props.assets.test_envs.map((function(e){return s.a.createElement("option",{value:e.id,key:e.id},e.name)}))),s.a.createElement("p",{className:"error-message"},this.props.envError)),s.a.createElement("div",{className:"col-md-4 form-group"},s.a.createElement("select",{className:"form-control",name:"test_path",id:"test_path",multiple:!0,placeholder:"Test Path",value:this.props.testPath,onChange:this.props.testPathChanged.bind(this)},s.a.createElement("option",{value:"",defaultValue:!0}),this.props.assets.available_paths.map((function(e){return s.a.createElement("option",{value:e.id,key:e.id},e.path)}))),s.a.createElement("p",{className:"error-message"},this.props.testPathError)),s.a.createElement("div",{className:"col-md-2"},s.a.createElement("input",{type:"button",className:"btn btn-primary",value:"Submit",disabled:""===this.props.testPath||""===this.props.requester||""===this.props.env,onClick:this.props.submitTest})))))))}}]),a}(r.Component),N=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){return Object(c.a)(this,a),t.apply(this,arguments)}return Object(o.a)(a,[{key:"render",value:function(){return s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-12"},s.a.createElement("fieldset",null,s.a.createElement("legend",null,"Upload test"),s.a.createElement("form",null,s.a.createElement("div",{className:"row"},s.a.createElement("div",{className:"col-md-3 form-group"},s.a.createElement("select",{className:"form-control",name:"upload_dir",id:"upload_dir",placeholder:"Upload Dir",value:this.props.uploadDir,onChange:this.props.uploadDirChanged.bind(this)},s.a.createElement("option",{value:"",defaultValue:!0}),this.props.assets.upload_dirs.map((function(e){return s.a.createElement("option",{value:e,key:e},e)}))),s.a.createElement("p",{className:"error-message"},this.props.uploadDirError)),s.a.createElement("div",{className:"col-md-3 form-group"},s.a.createElement("input",{accept:".py",type:"file",name:"test_file",id:"test_file",key:this.props.testFile,onChange:this.props.testFileChanged.bind(this)}),s.a.createElement("p",{className:"error-message"},this.props.testFileError)),s.a.createElement("div",{className:"col-md-2"},s.a.createElement("input",{type:"button",id:"submit_test_upload",className:"btn btn-primary",value:"Submit",disabled:""===this.props.uploadDir||""===this.props.testFile,onClick:this.props.uploadTest})))))))}}]),a}(r.Component),y=function(e){Object(u.a)(a,e);var t=Object(m.a)(a);function a(){var e;Object(c.a)(this,a);for(var r=arguments.length,s=new Array(r),n=0;n<r;n++)s[n]=arguments[n];return(e=t.call.apply(t,[this].concat(s))).state={assets:{test_envs:[],available_paths:[],upload_dirs:[]},error:!1,items:[],detailsView:!1,itemID:null,currentItem:{},requesterError:"",envError:"",testPathError:"",requester:"",env:"",testPath:[],uploadDir:"",uploadDirError:"",testFile:"",testFileError:""},e.interval=null,e.getDisplayPath=function(t){var a="";return e.state.assets.available_paths.map((function(e){t.some((function(t){return t===e.id}))&&(a+=e.path+" ")})),a},e.refreshList=function(){f.get("test-run").then((function(t){var a=t.data;e.setState({items:a.map((function(t){return Object(i.a)({displayPath:e.getDisplayPath(t.path)},t)}))})})).catch((function(t){e.setState({error:!0})})),null!==e.state.itemID&&e.viewItemDetails(e.state.itemID)},e.submitTest=function(){f.post("test-run",{requested_by:e.state.requester,env:e.state.env,path:e.state.testPath}).then((function(t){e.setState({requester:"",env:"",testPath:""}),e.refreshList()})).catch((function(t){e.setState({requesterError:t.data.requested_by,envError:t.data.env,testPathError:t.data.path})}))},e.uploadTest=function(){var t=new FormData;t.append("upload_dir",e.state.uploadDir),t.append("test_file",e.state.testFile),f.post("test-file",t,{headers:{"Content-Type":"multipart/form-data"}}).then((function(t){e.setState({uploadDir:"",testFile:null}),e.refreshAssets()})).catch((function(t){e.setState({uploadDirError:t.response.data.upload_dir,testFileError:t.response.data.test_file})}))},e.viewItemDetails=function(t){f.get("test-run/"+t).then((function(t){var a=t.data;a.displayPath=e.getDisplayPath(t.data.path),e.setState({currentItem:a})})).catch((function(t){e.setState({error:!0})})),e.setState({detailsView:!0,itemID:t})},e.backToListItems=function(){e.setState({detailsView:!1,itemID:null})},e.handleTestPathChanged=function(t){for(var a=t.target.options,r=[],s=0,n=a.length;s<n;s++)a[s].selected&&r.push(a[s].value);e.setState({testPath:r})},e}return Object(o.a)(a,[{key:"refreshAssets",value:function(){var e=this;f.get("assets").then((function(t){e.setState({assets:t.data})})).catch((function(t){e.setState({error:!0})}))}},{key:"componentDidMount",value:function(){this.refreshAssets(),this.interval=setInterval(this.refreshList,1e3),this.refreshList()}},{key:"componentWillUnmount",value:function(){clearInterval(this.interval)}},{key:"render",value:function(){var e=this;return this.state.detailsView?s.a.createElement(b,{currentItem:this.state.currentItem,backClicked:this.backToListItems}):s.a.createElement(p,null,s.a.createElement(g,{requester:this.state.requester,requesterError:this.state.requesterError,env:this.state.env,envError:this.state.envError,testPath:this.state.testPath,testPathError:this.state.testPathError,assets:this.state.assets,requesterChanged:function(t){var a;return e.setState({requester:null===(a=t.target.value)||void 0===a?void 0:a.toString()})},envChanged:function(t){var a;return e.setState({env:null===(a=t.target.value)||void 0===a?void 0:a.toString()})},testPathChanged:this.handleTestPathChanged,submitTest:this.submitTest}),s.a.createElement(N,{assets:this.state.assets,testFile:this.state.testFile,testFileChanged:function(t){return e.setState({testFile:t.target.files[0]})},testFileError:this.testFileError,uploadDir:this.state.uploadDir,uploadDirChanged:function(t){var a;return e.setState({uploadDir:null===(a=t.target.value)||void 0===a?void 0:a.toString()})},uploadDirError:this.state.uploadDirError,uploadTest:this.uploadTest}),s.a.createElement(E,{items:this.state.items,viewItemDetails:this.viewItemDetails}))}}]),a}(r.Component);var D=function(){return s.a.createElement("div",null,s.a.createElement(y,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(s.a.createElement(s.a.StrictMode,null,s.a.createElement(D,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[18,1,2]]]);
//# sourceMappingURL=main.a92d8d08.chunk.js.map